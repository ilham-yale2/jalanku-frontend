<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../dist/output.css" rel="stylesheet">
</head>
<body class="bg-slate-200">
    <div class="flex justify-center w-full min-h-screen">

        <div class="relative w-full h-screen max-w-md overflow-hidden bg-slate-100">
            <div class="relative w-full overflow-hidden" style="height: 85vh;">
                <video id="webcam" class="absolute left-1/2 top-1/2"  autoplay></video>
            </div>

            <div class="absolute bottom-0 z-10 w-full h-40 px-3 pt-2 duration-300 ease-out bg-white rounded-t-2xl" id="trackContainter">
                <div class="flex items-center justify-center w-full h-8">
                    <div class="w-20 h-2 mb-4 rounded-pill bg-slate-400" id="scrollBar"></div>
                    <span class="iconify text-slate-400" style="display: none;" data-icon="ph:caret-down-bold" id="caretBar" data-width="30"></span>
                </div>
                <div class="text-xl font-bold">
                    Tracked & Recorded (5)
                </div>
                <div class="w-full h-full overflow-scroll track-list">
                    <div class="flex items-center w-full px-4 py-2 mt-3 rounded-md bg-slate-200 track-item">
                        <div class="w-4/5 md:mr-auto">
                            <div class="text-base font-semibold">
                                Pothole 1 (5,6)
                            </div>
                            <div class="flex items-center">
                                <span class="text-red-600 iconify" data-icon="heroicons:map-pin-20-solid" data-width="25"></span>
                                <span class="ml-3 text-xs">7.6153723, 128.387262</span>
                            </div>
                        </div>
                        <img src="images/image 5.png" class="w-2/12" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha512-bnIvzh6FU75ZKxp0GXLH9bewza/OIw6dLVh9ICg0gogclmYGguQJWl8U30WpbsGTqbIiAwxTsbe76DErLq5EDQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            let scroollBar = document.querySelector('#scrollBar');
            let caretBar = document.querySelector('#caretBar');
            let trackContainter = document.querySelector('#trackContainter');
        
            scroollBar.addEventListener("click", function (e) {
                trackContainter.classList.remove('h-40')
                trackContainter.classList.add('h-4/5')
                toggleTrigger('#scrollBar', '#caretBar')
            });
            caretBar.addEventListener("click", function (e) {
                trackContainter.classList.remove('h-4/5')
                trackContainter.classList.add('h-40')
                toggleTrigger('#caretBar', '#scrollBar')
            });

            function toggleTrigger(hide, show){
                $(hide).fadeToggle(200)
                setTimeout(function(){
                    $(show).fadeToggle(200)
                    console.log(show)
                }, 500)
            }

        });

        // Check for navigator.mediaDevices.getUserMedia availability
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: {facingMode: 'environment',} });
                const videoElement = document.getElementById('webcam');
                videoElement.srcObject = stream;
            } catch (error) {
                console.error('Gagal mengakses kamera belakang:', error);
            }
        }

        let item = $('.track-item')
        
        for(var i = 0; i < 9; i++){
            $('.track-list').append(item.clone())
        }

        startCamera();
    </script>
    <script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>
</body>
</html>